/*! For license information please see search.js.LICENSE.txt */
(()=>{"use strict";var t={"./src/js/search/constants.js":(t,e,n)=>{n.r(e),n.d(e,{STORE_NAME:()=>r});var r="ecmmm_search"},"./src/js/search/data.js":(t,e,n)=>{n.r(e),n.d(e,{DEFAULT_STATE:()=>h,store:()=>w});var r=n("./src/js/search/helpers.js"),o=n("./src/js/search/constants.js");function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function l(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t,e,n){var r;return r=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==i(r)?r:String(r))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f=window.zustand,d=f.persist,p=f.create,v=f.stores,h={restApiUrl:"",rootUrl:"",url:"",filterKeys:["category","post_tag"],filters:{},filterIds:[],pageNo:1,resultCount:null,noOfPages:0,resultMarkup:"",loading:!1,page:1},g=[],y=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=b(null!==(t=null==e?void 0:e.root_url)&&void 0!==t?t:{});m(e||{},n||{}),j()},b=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=E().filterKeys,i=new URL(window.location.href),l={};return(l=(0,r.getFiltersFromUrl)(i,o)).url=(0,r.getUrlWithFilters)(null!==(t=null===(e=l)||void 0===e?void 0:e.filters)&&void 0!==t?t:{},n),l},m=function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(c({rootUrl:null!==(t=null==r?void 0:r.root_url)&&void 0!==t?t:"",restApiUrl:null!==(e=null==r?void 0:r.rest_api_url)&&void 0!==e?e:"",filterIds:null!==(n=null==r?void 0:r.filter_ids)&&void 0!==n?n:{},loading:!0},o)),j()},j=function(){var t=E(),e=t.restApiUrl,n=t.filters,o=t.pageNo;if(e){var i=c(c({},n),{},{page:o});console.log("params",i);var l=e+"?"+new URLSearchParams(i).toString();console.log("fetchUrl",l),fetch(l).then((function(t){return console.log("response.header",t.headers.get("X-WP-Total")),{posts:t.json(),total_posts:parseInt(t.headers.get("X-WP-Total")),no_of_pages:parseInt(t.headers.get("X-WP-TotalPages"))}})).then((function(t){t.posts.then((function(e){var n,i,l,a,u,c=(0,r.getResultMarkup)(null!=e?e:[],null!==(n=null==t?void 0:t.total_posts)&&void 0!==n?n:0);console.log("responseData?.no_of_pages ?? 0",null!==(i=null==t?void 0:t.no_of_pages)&&void 0!==i?i:0);var s=(0,r.getLoadMoreMarkup)(null!==(l=null==t?void 0:t.no_of_pages)&&void 0!==l?l:0,o);console.log("responseData",t),_({loading:!1,resultCount:null!==(a=null==t?void 0:t.total_posts)&&void 0!==a?a:0,resultPosts:null!=e?e:[],resultMarkup:c+s||"",noOfPages:null!==(u=null==t?void 0:t.no_of_pages)&&void 0!==u?u:0})}))}))}},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=E(),n=e.filters,o=e.rootUrl,i=t||{},a=i.key,u=i.value,f=c({},n),d=n[a]?[].concat(l(n[a]),[u]):[u];f=c(c({},f),{},s({},a,l(new Set(d))));var p=(0,r.getUrlWithFilters)(f,o);_({url:p,currentSelection:t,filters:f,pageNo:1,page:1,loading:!0}),j()},P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=E(),n=e.filters,o=e.rootUrl,i=t||{},l=i.key,a=i.value,u=c({},n),f=n[l]||[];f.forEach((function(t,e){t===a&&f.splice(e,1)})),u=c(c({},u),{},s({},l,f)),Object.keys(u).forEach((function(t){u[t]&&u[t].length||delete u[t]}));var d=(0,r.getUrlWithFilters)(u,o);_({url:d,currentSelection:t,filters:u,pageNo:1,loading:!0}),j()},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=E(),n=e.restApiUrl,o=e.resultMarkup,i=e.filters,l=(0,r.getUrlWithFilters)(c(c({},i),{},{page:t}),n);_({loadingMorePosts:!0,pageNo:t}),fetch(l).then((function(t){return console.log("response.header",t.headers.get("X-WP-Total")),{posts:t.json(),total_posts:parseInt(t.headers.get("X-WP-Total")),no_of_pages:parseInt(t.headers.get("X-WP-TotalPages"))}})).then((function(e){e.posts.then((function(n){var i,l,a=(0,r.getResultMarkup)(null!=n?n:[]);console.log("loadmoreresponseData?.posts ?? []",null!==(i=null==e?void 0:e.posts)&&void 0!==i?i:[]);var u=(0,r.getLoadMoreMarkup)(null!==(l=null==e?void 0:e.no_of_pages)&&void 0!==l?l:0,t);_({loadingMorePosts:!1,resultPosts:null!=n?n:[],resultMarkup:o+a+u})}))}))},k=function(){var t=E().rootUrl;_({loading:!0,filters:{},filterIds:[],currentSelection:{},pageNo:1}),function(t){if(!t)return null;window.history.pushState?window.history.pushState({path:t},"",t):window.location.href=t}(t),j()},w=p(d((function(){return c(c({},h),{},{initialize:y,addFilter:O,deleteFilter:P,loadMorePosts:S,clearAllFilters:k})}),{name:o.STORE_NAME,partialize:function(t){var e={};return g.forEach((function(n){e[n]=t[n]})),e}})),E=w.getState,_=w.setState;v[o.STORE_NAME]=w},"./src/js/search/helpers.js":(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){var o;return o=function(t,e){if("object"!=r(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(e,"string"),(e="symbol"==r(o)?o:String(o))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.r(e),n.d(e,{getFiltersFromUrl:()=>a,getLoadMoreMarkup:()=>s,getResultMarkup:()=>c,getUrlWithFilters:()=>u});var a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t&&e.length?(e.forEach((function(e){var r=t.searchParams.get(e);if(r)if("pageNo"!==e){var o=r.split(",").map((function(t){return parseInt(t)}));n.filters=i(i({},n.filters),{},l({},e,o))}else n.pageNo=parseInt(r)})),n):n},u=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(function(t){if(null==t)throw new TypeError("Cannot destructure "+t)}(t={}),t),n=new URL(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"");return Object.keys(e).forEach((function(t){n.searchParams.set(t,e[t])})),n=n.toString()},c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(t)||!t.length)return"";var e="",n="";return t.forEach((function(t){var r,o,i,l,a,u,c,s;e=t.thumbnail?t.thumbnail:'<img src="https://via.placeholder.com/526x300" width="526" height="300"/>',n+='\n\t\t<section id="post-'.concat(null!==(r=null==t?void 0:t.id)&&void 0!==r?r:0,'" class="col-lg-4 col-md-6 col-sm-12 pb-4">\n\t\t\t<header>\n\t\t\t\t<a href="').concat(null!==(o=null==t?void 0:t.permalink)&&void 0!==o?o:"",'" class="block">\n\t\t\t\t<figure class="img-container">\n\t\t\t\t\t').concat(e,'\n\t\t\t\t</figure>\n\t\t\t</header>\n\t\t\t<div class="post-excerpt my-4">\n\t\t\t\t<a href="').concat(null!==(i=null==t?void 0:t.permalink)&&void 0!==i?i:"",'" title="').concat(null!==(l=null==t?void 0:t.title)&&void 0!==l?l:"",'">\n\t\t\t\t\t<h3 class="post-card-title">').concat(null!==(a=null==t?void 0:t.title)&&void 0!==a?a:"",'</h3>\n\t\t\t\t</a>\n\t\t\t\t<div class="mb-4 truncate-4">\n\t\t\t\t\t').concat(null!==(u=null==t?void 0:t.content)&&void 0!==u?u:"",'\n\t\t\t\t</div>\n\t\t\t\t<a href="').concat(null!==(c=null==t?void 0:t.permalink)&&void 0!==c?c:"",'"  class="btn btn-primary"  title="').concat(null!==(s=null==t?void 0:t.title)&&void 0!==s?s:"",'">\n\t\t\t\t\tView More\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t</section>\n\t\t')})),n},s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return parseInt(e)>=parseInt(t)?"":'<aquila-load-more\n\t\t\t\tclass="load-more-wrap"\n\t\t\t\tnext-page-no="'.concat(parseInt(e)+1,'"\n\t\t\t>\n\t\t\t\t<button class="btn btn-primary">Load More</button>\n\t\t\t</aquila-load-more>')}},"./src/js/search/index.js":(t,e,n)=>{n.r(e);var r=n("./src/js/utils/index.js"),o=n("./src/js/search/data.js");function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function a(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function u(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:String(e)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=h(t);if(e){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return v(t)}function v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var g=window,y=g.customElements,b=g.HTMLElement,m=o.store.getState,j=o.store.subscribe,O=function(t){s(n,t);var e=d(n);function n(){var t;return c(this,n),t=e.call(this),m().initialize(search_settings),t}return a(n)}(b),P=function(t){s(n,t);var e=d(n);function n(){var t;c(this,n),t=e.call(this);var r=m().clearAllFilters;return t.clearAllFiltersButton=t.querySelector("button"),t.clearAllFiltersButton.addEventListener("click",(function(){r()})),t}return a(n)}(b),S=function(t){s(n,t);var e=d(n);function n(){return c(this,n),e.apply(this,arguments)}return a(n)}(b),k=function(t){s(n,t);var e=d(n);function n(){var t;return c(this,n),(t=e.call(this)).filterKey=t.getAttribute("key"),t.content=t.querySelector(".checkbox-accordion__content"),t.accordionHandle=t.querySelector(".checkbox-accordion__handle"),t.accordionHandle&&t.content&&t.filterKey?(t.accordionHandle.addEventListener("click",(function(e){return(0,r.toggleAccordionContent)(e,v(t),t.content)})),t):p(t)}return a(n,[{key:"attributeChangedCallback",value:function(t,e,n){this.content.style.height="active"===t?"auto":"0px"}}],[{key:"observedAttributes",get:function(){return["active"]}}]),n}(b),w=function(t){s(n,t);var e=d(n);function n(){var t;return c(this,n),(t=e.call(this)).content=t.querySelector(".checkbox-accordion__child-content"),t.accordionHandle=t.querySelector(".checkbox-accordion__child-handle-icon"),t.inputEl=t.querySelector("input"),console.log(t.inputEl),j(t.update.bind(v(t))),t.accordionHandle&&t.content&&t.accordionHandle.addEventListener("click",(function(e){return(0,r.toggleAccordionContent)(e,v(t),t.content)})),t.inputEl&&t.inputEl.addEventListener("click",(function(e){return t.handleCheckboxInputClick(e)})),t}return a(n,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.inputEl){var e=t.filters;this.inputKey=this.inputEl.getAttribute("data-key"),this.inputValue=this.inputEl.getAttribute("value"),this.selectedFiltersForCurrentkey=e[this.inputKey]||[],this.parentEl=this.inputEl.closest(".checkbox-accordion")||{},this.parentContentEl=this.inputEl.closest(".checkbox-accordion__child-content")||{},this.selectedFiltersForCurrentkey.includes(parseInt(this.inputValue))?(this.inputEl.checked=!0,this.parentEl.setAttribute("active",!0),this.parentContentEl.style&&(this.parentContentEl.style.height="auto")):(this.inputEl.checked=!1,this.parentEl.removeAttribute("active"))}}},{key:"handleCheckboxInputClick",value:function(t){var e=m(),n=e.addFilter,r=e.deleteFilter,o=t.target;this.filterKey=o.getAttribute("data-key"),o.checked?n({key:this.filterKey,value:parseInt(o.value)}):r({key:this.filterKey,value:parseInt(o.value)})}}]),n}(b),E=function(t){s(n,t);var e=d(n);function n(){var t;return c(this,n),t=e.call(this),j(t.update.bind(v(t))),t}return a(n,[{key:"update",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).resultCount;null!==t&&(this.innerHTML="Results: ".concat(t," Posts"))}}]),n}(b),_=function(t){s(n,t);var e=d(n);function n(){var t;return c(this,n),t=e.call(this),j(t.update.bind(v(t))),t}return a(n,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.resultMarkup,n=t.loading;n&&(this.innerHTML="<p>Loading...</p>"),e&&!n&&(this.innerHTML=e)}}]),n}(b),A=function(t){s(n,t);var e=d(n);function n(){var t;return c(this,n),t=e.call(this),j(t.update.bind(v(t))),t.querySelector("button").addEventListener("click",(function(){return t.handleLoadMoreButtonClick()})),t.nextPageNo=t.getAttribute("next-page-no"),t}return a(n,[{key:"update",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pageNo;if(parseInt(this.nextPageNo)<=parseInt(t))return this.remove(),null}},{key:"handleLoadMoreButtonClick",value:function(){(0,m().loadMorePosts)(this.nextPageNo)}}]),n}(b),M=function(t){s(n,t);var e=d(n);function n(){var t;return c(this,n),t=e.call(this),j(t.update.bind(v(t))),t}return a(n,[{key:"update",value:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).loadingMorePosts;this.innerHTML=t?"Loading more posts...":""}}]),n}(b);y.define("aquila-checkbox-accordion",k),y.define("aquila-checkbox-accordion-child",w),y.define("aquila-clear-all-filters",P),y.define("aquila-filters",S),y.define("aquila-results-count",E),y.define("aquila-results",_),y.define("aquila-load-more",A),y.define("aquila-loading-more",M),y.define("aquila-search",O)},"./src/js/utils/index.js":(t,e,n)=>{n.r(e),n.d(e,{slideElementDown:()=>o,slideElementUp:()=>i,toggleAccordionContent:()=>r});var r=function(t,e,n){if(t.preventDefault(),t.stopPropagation(),!e||!n)return null;e.toggleAttribute("active"),e.hasAttribute("active")?o(n,600):i(n,600)},o=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.style.height="".concat(t.scrollHeight,"px"),setTimeout((function(){t.style.height="auto",n&&n()}),e)},i=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.style.height="".concat(t.scrollHeight,"px"),t.offsetHeight,t.style.height="0px",setTimeout((function(){t.style.height=null,n&&n()}),e)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{n.r(r);n("./src/js/search/index.js")})()})();
//# sourceMappingURL=search.js.map